{"version":3,"sources":["../../src/server/next.ts"],"names":["NextServer","loadRequireHook","ServerImpl","getServerImpl","undefined","Promise","resolve","require","default","constructor","options","hostname","port","getRequestHandler","req","res","parsedUrl","getTracer","trace","NextServerSpan","requestHandler","getServerRequestHandler","getUpgradeHandler","socket","head","server","getServer","handleUpgrade","apply","setAssetPrefix","assetPrefix","preparedAssetPrefix","logError","args","render","renderToHTML","renderError","renderErrorToHTML","render404","serveStatic","prepare","dev","close","createServer","ServerImplementation","loadConfig","preloadedConfig","PHASE_DEVELOPMENT_SERVER","PHASE_PRODUCTION_SERVER","dir","conf","_renderWorker","serverPromise","then","output","log","warn","Error","experimental","appDir","process","env","NEXT_PREBUNDLED_REACT","overrideBuiltInReactPackages","reqHandlerPromise","wrap","bind","typescript","createTSPlugin","NODE_ENV","includes","NON_STANDARD_NODE_ENV","console","module","exports"],"mappings":"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"}